window.addEventListener("load",(function(){const e=document.getElementById("canvas"),t=e.getContext("2d"),n=document.getElementById("lineWidth");let o=!1,d=1,a=[],i=0;function c(e){t.lineTo(e.offsetX,e.offsetY),t.stroke(),t.beginPath(),t.arc(e.offsetX,e.offsetY,d,0,2*Math.PI),t.fill(),t.beginPath(),t.moveTo(e.offsetX,e.offsetY)}function l(e){t.strokeStyle=e.target.style.backgroundColor,t.fillStyle=e.target.style.backgroundColor}function r(){t.clearRect(0,0,e.width,e.height)}document.addEventListener("contextmenu",(function(e){"canvas"==e.target.className&&e.preventDefault()})),e.addEventListener("mousedown",(function(){o=!0,t.beginPath()})),e.addEventListener("mouseup",(function(e){o=!1,t.globalCompositeOperation="source-over",a.push("endPath")})),e.addEventListener("mousemove",(function(e){o&0===e.button&&(a.push([e.offsetX,e.offsetY]),c(e),t.lineWidth=2*d)})),e.addEventListener("mousemove",(function(e){o&3===e.which&&(t.globalCompositeOperation="destination-out",c(e))})),n.addEventListener("click",(function(){d=n.value})),document.getElementById("clear").addEventListener("click",r),document.getElementById("rotateRight").addEventListener("click",(function(){i+=90,e.style.transform=`rotate(${i}deg)`})),document.getElementById("rotateLeft").addEventListener("click",(function(){i-=90,e.style.transform=`rotate(${i}deg)`})),document.getElementById("save").addEventListener("click",(function(){localStorage.setItem("coords",JSON.stringify(a)),t.beginPath()})),document.getElementById("replay").addEventListener("click",(function(){a=JSON.parse(localStorage.getItem("coords")),r();const e=setInterval((function(){if(!a.length)return clearInterval(e),void t.beginPath();const n=a.shift();c({offsetX:n[0],offsetY:n[1]})}),10)})),function(){for(let e=0,t=3;e<=t;e++)for(let n=0;n<=t;n++)for(let o=0;o<=t;o++){const d=document.createElement("div");d.className="button",d.addEventListener("click",l),d.style.backgroundColor="rgb("+Math.round(255*e/t)+", "+Math.round(255*n/t)+", "+Math.round(255*o/t)+")",document.getElementById("palette").appendChild(d)}}(document.getElementById("palette"))}));